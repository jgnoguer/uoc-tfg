---
apiVersion: v1
kind: ConfigMap
metadata:
  name: scylladb-config
  namespace: scylla
data:
  scylla.yaml: |
    authenticator: PasswordAuthenticator
    authorizer: CassandraAuthorizer
    # Other options
---
apiVersion: scylla.scylladb.com/v1
kind: ScyllaCluster
metadata:
  name: scylladb-uoc
  namespace: scylla
spec:
  repository: docker.io/scylladb/scylla
  version: 2025.5.27
  agentVersion: 3.5.0
  developerMode: true
  automaticOrphanedNodeCleanup: true
  sysctls:
  - fs.aio-max-nr=232323
  datacenter:
    name: animals
    racks:
    - name: db-rack
      members: 1
      scyllaConfig: scylladb-config
      storage:
        capacity: 10Gi
        storageClassName: scylladb-local-xfs
      resources:
        requests:
          cpu: 1
          memory: 2Gi
        limits:
          cpu: 3
          memory: 3Gi
      placement:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: scylla.scylladb.com/node-type
                operator: In
                values:
                - scylla
        tolerations:
        - key: scylla-operator.scylladb.com/dedicated
          operator: Equal
          value: scyllaclusters
          effect: NoSchedule
        - key: scylla-operator.scylladb.com/dedicated
          operator: Equal
          value: scyllaclusters
          effect: NoExecute
